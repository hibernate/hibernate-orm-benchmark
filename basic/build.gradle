/*
 * This file was generated by the Gradle 'init' task.
 *
 * This project uses @Incubating APIs which are subject to change.
 */

plugins {
    id 'org.hibernate.orm.java-conventions'
    id "me.champeau.jmh" version "0.7.2"
}

repositories {
    mavenLocal()
}

dependencies {
    testRuntimeOnly 'com.h2database:h2:2.2.224'

    testImplementation 'org.openjdk.jmh:jmh-core:1.36'
    testImplementation 'org.openjdk.jmh:jmh-generator-annprocess:1.36'
    def orm = project.findProperty("orm")
    if ( "6.4" == orm ) {
        testImplementation 'org.hibernate.orm:hibernate-core:6.5.2.Final'
        testImplementation 'org.hibernate.orm:hibernate-testing:6.4.8.Final'
    }
    else if ( "6.2" == orm ) {
        testImplementation 'org.hibernate.orm:hibernate-core:6.5.2.Final'
        testImplementation 'org.hibernate.orm:hibernate-testing:6.2.25.Final'
    }
    else if ( "5.6" == orm ) {
        testImplementation 'org.hibernate:hibernate-core-jakarta:5.6.15.Final'
        testImplementation 'org.hibernate:hibernate-testing-jakarta:5.6.15.Final'
    }
    else if ( "perf" == orm ) {
        testImplementation 'org.hibernate.orm:hibernate-core:6.5.2.Final'
        testImplementation 'org.hibernate.orm:hibernate-testing:6.6.0-perf'
    }
    else {
        testImplementation 'org.hibernate.orm:hibernate-core:6.5.2.Final'
        testImplementation 'org.hibernate.orm:hibernate-testing:6.6.0.Alpha1'
    }
}

description = 'hibernate-orm-benchmark-basic'

jmh {
    warmupIterations = 2
    iterations = 5
    fork = 1
}